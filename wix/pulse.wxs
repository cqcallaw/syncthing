<?xml version='1.0' encoding='windows-1252'?>
<Wix xmlns='http://schemas.microsoft.com/wix/2006/wi'>
	
	<?include $(sys.CURRENTDIR)\wix\project-version.wxi ?>

	<Product Name='Pulse' Id='6A45ACF2-FD29-4D26-BB88-8CD784984A7E' UpgradeCode='D2D62975-0D11-4198-B3C0-6869D70E0832'
		Language='1033' Codepage='1252' Version='$(var.version)' Manufacturer='Jakob Berg et. al.'>

		<!-- TODO: auto-generate version number -->

		<?if $(sys.BUILDARCH)="x86"?>
			<?define Minimum_Version="100"?>
			<?define Program_Files="ProgramFilesFolder"?>
		<?elseif $(sys.BUILDARCH)="x64"?>
			<?define Minimum_Version="200"?>
			<?define Program_Files="ProgramFiles64Folder"?>
		<?else?>
			<?error Unsupported value of sys.BUILDARCH=$(sys.BUILDARCH)?>
		<?endif?>

		<Package Id='*' Keywords='Installer'
			Description="Pulse Installer" InstallerVersion='$(var.Minimum_Version)' Languages='1033' Compressed='yes' SummaryCodepage='1252' Platform='$(sys.BUILDARCH)'/>

		<Media Id='1' Cabinet='Sample.cab' EmbedCab='yes' DiskPrompt="CD-ROM #1" />
		<Property Id='DiskPrompt' Value="Pulse Installation [1]" />

		<Directory Id='TARGETDIR' Name='SourceDir'>
			<Directory Id='$(var.Program_Files)' Name='PFiles'>
				<Directory Id='INSTALLDIR' Name='Pulse'>
					<Component Id='MainExecutable' Guid='5AC887A3-B7A2-4BC5-A250-148E50B04630'>
						<File Id='PulseEXE' Name='syncthing.exe' DiskId='1' Source='bin/syncthing.exe' KeyPath='yes' />
					</Component>
					<Component Id='README' Guid='897568EE-56B5-4A9F-AE0D-5D54C3FBAA6C'>
						<File Id='READMEFILE' Name='README.md' DiskId='1' Source='README.md' KeyPath='yes' />
					</Component>
					<Component Id='Contributors' Guid='1DACC907-E2EC-4148-9E52-F16D69CB778B'>
						<File Id='ContributorsFILE' Name='CONTRIBUTORS' DiskId='1' Source='CONTRIBUTORS' KeyPath='yes' />
					</Component>
					<Component Id='License' Guid='BA79CCEE-616A-427B-8CDF-3D2F479BA34A'>
						<File Id='LicenseFILE' Name='LICENSE' DiskId='1' Source='LICENSE' KeyPath='yes' />
					</Component>
				</Directory>
			</Directory>
		</Directory>

		<Feature Id='Complete' Title='Pulse' Description='The complete package.'
			Display='expand' Level='1' ConfigurableDirectory='INSTALLDIR'>
			<ComponentRef Id='MainExecutable' />
			<ComponentRef Id='README' />
			<ComponentRef Id='Contributors' />
			<ComponentRef Id='License' />
		</Feature>

		<UIRef Id="WixUI_Mondo" />
		<UIRef Id="WixUI_ErrorProgressText" />

		<WixVariable Id="WixUILicenseRtf" Value="wix/LICENSE.rtf" />

	</Product>
</Wix>
